<h1> Register a order </h1>

<%= form_with model: @record do |form| %>
    <%= render "shared/form_errors", form: form %>

    <div class="mb-3">
      <% order = Array.new %>
      <% for p in Order.all %>
          <% order << p.id %>
      <% end %>
      <p> Select a order: </p>
      <%= form.select :order_id, ["New order",order], selected: "New order", class: "form-control" %>
    </div>

    <div class="mb-3">
      <div class="row g-0">
        <div class="mb-3 col-7">
            <p> Product name </p>
            <% for product in Product.all %>    <!-- For to list all products -->
              <% if product.stock > 0 %>        <!-- Only show products with stock > 0 -->
                <%= check_box_tag :product_id, product.id %>
                <%= product.description%><br />
              <% end %>
            <% end %>
        </div>
        <div class="mb-3 col-2">
          <p> Amount </p>
          <% for product in Product.all %>
            <% if product.stock > 0 %>    <!-- Show amount field only products with stock -->
              <%= form.number_field :amount, max: product.stock, min: 1, value: 1 %>
            <% end %>
          <% end %>
        </div>
    </div>

    <div class="mb-3">
        <%= form.submit %>
        <%= link_to "Back", root_path , class: "btn" %>
    </div>

<% end %>